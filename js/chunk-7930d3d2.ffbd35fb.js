(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7930d3d2"],{"4fad":function(t,e,a){var i=a("23e7"),s=a("6f53").entries;i({target:"Object",stat:!0},{entries:function(t){return s(t)}})},"6a19":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("ProjectAudit",{attrs:{projectId:t.selectedProject}})],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.user.groups.includes("mapping | access")?a("v-container",[a("v-dialog",{attrs:{width:"auto"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[t._v("Audit hit: "+t._s(t.selectedHit.hit_reason)+" ("+t._s(t.selectedHit.audit_type)+")")]),a("v-card-text",[a("v-simple-table",{attrs:{"max-width":"40"}},[a("tbody",[a("tr",[a("td",[t._v("FSN")]),a("td",[t._v(t._s(t.selectedHit.extra_1)+" | "+t._s(t.selectedHit.extra_2))])]),a("tr",[a("td",[t._v("Commentaar:")]),a("td",[a("v-textarea",{attrs:{label:"Commentaar"},model:{value:t.selectedHit.comment,callback:function(e){t.$set(t.selectedHit,"comment",e)},expression:"selectedHit.comment"}})],1)]),a("tr",[a("td",[t._v("Whitelist:")]),a("td",[a("v-checkbox",{attrs:{label:"Whitelist"},model:{value:t.selectedHit.ignore,callback:function(e){t.$set(t.selectedHit,"ignore",e)},expression:"selectedHit.ignore"}}),t.selectedHit.ignore_user?a("div",[t._v("Whitelist door: "+t._s(t.selectedHit.ignore_user))]):t._e()],1)])])])],1),a("v-card-actions",[a("v-btn",{attrs:{color:"danger"},on:{click:function(e){return t.updateHit()}}},[t._v("Aanpassen")]),a("v-btn",{attrs:{color:"primary"},on:{click:function(e){return t.closeDialog()}}},[t._v("Sluiten")])],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("BackToProjectsSolo")],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",[a("v-card-title",[t._v(" Hits Filteren ")]),a("v-card-text",[a("v-simple-table",{attrs:{"max-width":"40"}},[a("tbody",[a("tr",[a("td",{attrs:{colspan:"2"}},[a("v-text-field",{attrs:{label:"Zoek binnen resultaten","hide-details":"",autofocus:"",clearable:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]),t._l(t.headers,(function(e){return a("tr",{key:e.text},[t.filters.hasOwnProperty(e.value)&&e.hasOwnProperty("filters")?a("td",{attrs:{align:"left"}},[t._v(" "+t._s(e.text)+" ")]):t._e(),t.filters.hasOwnProperty(e.value)&&e.hasOwnProperty("filters")?a("td",{staticClass:"text-left"},[a("v-select",{attrs:{flat:"",dense:"","hide-details":"",small:"",multiple:"",clearable:"",items:e.filters},model:{value:t.filters[e.value],callback:function(a){t.$set(t.filters,e.value,a)},expression:"filters[header.value]"}})],1):t._e()])})),a("tr",[a("td",{attrs:{colspan:"2"}},[a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.getHits()}}},[t._v("Filteren")])],1)])],2)])],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-card",{staticClass:"pa-1"},[a("v-card-title",[t._v(" Audit hits ")]),a("v-card-text",[a("v-data-table",{staticClass:"elevation-2",attrs:{"multi-sort":"",dense:"",headers:t.headers,search:t.search,items:t.hits,loading:t.loading,"server-items-length":t.props.pagination.itemsLength,"footer-props":t.props},on:{pagination:function(e){return t.handlePagination(e)},"update:sort-by":function(e){return t.handleSort(e)},"update:sort-desc":function(e){return t.handleSortDesc(e)}},scopedSlots:t._u([{key:"item.open",fn:function(e){var i=e.item;return[a("v-btn",{attrs:{small:"",color:"blue lighten-2"},on:{click:function(e){return t.selectHit(i)}}},[t._v("Open")])]}}],null,!1,2990348266)})],1)],1)],1)],1)],1):t._e()],1)},n=[],o=(a("99af"),a("a15b"),a("d81d"),a("4fad"),a("ac1f"),a("841c"),a("3835")),c=a("713e"),l=a("4c4d"),u={components:{BackToProjectsSolo:c["a"]},props:{projectId:String},data:function(){return{headers:[{text:"",value:"open"},{text:"Reden",value:"hit_reason"},{text:"FSN",value:"extra_1"},{text:"Commentaaar",value:"comment"},{text:"Whitelist",value:"ignore",filters:[!0,!1]},{text:"Timestamp",value:"first_hit_time"}],pagination:{"items-per-page-options":[25,50,100,150]},search:"",searchTimeout:null,hits:[],filters:{ignore:[]},loading:!0,totalHits:0,hitsOffset:0,page:1,perPage:25,perPageOptions:[25,50,100,150],props:{pagination:{page:1,itemsPerPage:100,pageStart:0,pageStop:100,pageCount:1,itemsLength:0},sortBy:[],showCurrentPage:!0,showFirstLastPage:!0,itemsPerPageOptions:[25,50,100,150]},dialog:!1,selectedHit:{id:49,project_id:9,audit_type:"ProjectAuditTypes.unmapped_component",hit_reason:"Concept 68812007 is niet gemapt.",comment:null,ignore:!1,ignore_user:null,first_hit_time:"2023-05-22T16:52:46.650120+02:00"}}},methods:{selectTask:function(t,e){this.$router.push({path:"/mapping/Projects/".concat(e,"/Task/").concat(t)})},columnValueList:function(t){return this.hits.map((function(e){return e[t]})).sort()},getHits:function(){var t=this;this.loading=!0;var e={limit:this.props.pagination.itemsPerPage,offset:(this.props.pagination.page-1)*this.props.pagination.itemsPerPage};this.sortBy&&(e["ordering"]=this.sortBy.join(",")),this.search.length&&(e["search"]=this.search);for(var a=0,i=Object.entries(this.filters);a<i.length;a++){var s=Object(o["a"])(i[a],2),r=s[0],n=s[1];n.length&&(e[r]=n.join(","))}l["a"].get_audit(this.projectId,e).then((function(e){t.props.pagination.itemsLength=e.count,t.hits=e.results,t.loading=!1}))},selectHit:function(t){this.selectedHit=Object.assign({},t),this.dialog=!0},closeDialog:function(){this.dialog=!1},updateHit:function(){var t={ignore:this.selectedHit.ignore,comment:this.selectedHit.comment},e=this;l["a"].post_audit(this.projectId,this.selectedHit.id,t).then((function(){e.getHits(),e.dialog=!1}))},handleSort:function(t){this.props.sortBy=t},handleSortDesc:function(t){this.sortBy=this.props.sortBy.map((function(e,a){return t[a]?e:"-"+e})),this.getHits()},handlePagination:function(t){var e=!1;this.props.pagination.page!==t.page&&(this.props.pagination.page=t.page,e=!0),this.props.pagination.itemsPerPage!==t.itemsPerPage&&(this.props.pagination.itemsPerPage=t.itemsPerPage,e=!0),this.props.pagination.pageStart=t.pageStart,this.props.pagination.pageStop=t.pageStop,e&&this.getHits()}},computed:{user:function(){return this.$store.state.userData},numPages:function(){return Math.ceil(this.totalHits/this.perPage)}},created:function(){this.getHits()},watch:{search:function(t,e){if(t!==e&&(0===t.length||t.length>2)){clearTimeout(this.searchTimeout);var a=this;this.searchTimeout=setTimeout((function(){a.getHits()}),1e3)}},filters:function(t,e){t!==e&&console.log(t)}}},p=u,d=a("2877"),h=a("6544"),g=a.n(h),f=a("8336"),m=a("b0af"),v=a("99d9"),_=a("ac7c"),b=a("62ad"),P=a("a523"),x=a("8fea"),H=a("169a"),k=a("0fd9"),j=a("b974"),T=a("1f4f"),y=a("8654"),w=a("a844"),V=Object(d["a"])(p,r,n,!1,null,null,null),S=V.exports;g()(V,{VBtn:f["a"],VCard:m["a"],VCardActions:v["a"],VCardText:v["b"],VCardTitle:v["c"],VCheckbox:_["a"],VCol:b["a"],VContainer:P["a"],VDataTable:x["a"],VDialog:H["a"],VRow:k["a"],VSelect:j["a"],VSimpleTable:T["a"],VTextField:y["a"],VTextarea:w["a"]});var C={components:{ProjectAudit:S},computed:{selectedProject:function(){return this.$route.params.projectid}}},O=C,$=Object(d["a"])(O,i,s,!1,null,null,null);e["default"]=$.exports},"713e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.user.groups.includes("mapping | access")?a("v-container",{attrs:{fluid:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"cyan darken-2",dark:""}},[a("v-toolbar-title",[a("v-btn",{attrs:{text:""},on:{click:function(e){return t.back()}}},[t._v("Terug naar projecten")]),a("br")],1)],1)],1)],1):t._e()},s=[],r={data:function(){return{}},methods:{back:function(){this.$store.commit("MappingTasks/clearTaskMemory"),this.$router.push({path:"/mapping/Projects/".concat(this.$route.params.projectid,"/")})}},computed:{user:function(){return this.$store.state.userData}},mounted:function(){}},n=r,o=a("2877"),c=a("6544"),l=a.n(c),u=a("8336"),p=a("b0af"),d=a("a523"),h=a("71d9"),g=a("2a7f"),f=Object(o["a"])(n,i,s,!1,null,null,null);e["a"]=f.exports;l()(f,{VBtn:u["a"],VCard:p["a"],VContainer:d["a"],VToolbar:h["a"],VToolbarTitle:g["a"]})}}]);
//# sourceMappingURL=chunk-7930d3d2.ffbd35fb.js.map